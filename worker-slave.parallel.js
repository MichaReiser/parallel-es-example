!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1)}([function(module,exports){/*!
 * Random.js version 0.2.6
 * curl http://simjs.com/_downloads/random-0.26-debug.js
 */
var Random=function(seed){if(seed=void 0===seed?(new Date).getTime():seed,"number"!=typeof seed||Math.ceil(seed)!=Math.floor(seed))throw new TypeError("seed value must be an integer");this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_by_array([seed],1)};Random.prototype.init_genrand=function(s){for(this.mt[0]=s>>>0,this.mti=1;this.mti<this.N;this.mti++){var s=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&s)>>>16)<<16)+1812433253*(65535&s)+this.mti,this.mt[this.mti]>>>=0}},Random.prototype.init_by_array=function(init_key,key_length){var i,j,k;for(this.init_genrand(19650218),i=1,j=0,k=this.N>key_length?this.N:key_length;k;k--){var s=this.mt[i-1]^this.mt[i-1]>>>30;this.mt[i]=(this.mt[i]^(1664525*((4294901760&s)>>>16)<<16)+1664525*(65535&s))+init_key[j]+j,this.mt[i]>>>=0,i++,j++,i>=this.N&&(this.mt[0]=this.mt[this.N-1],i=1),j>=key_length&&(j=0)}for(k=this.N-1;k;k--){var s=this.mt[i-1]^this.mt[i-1]>>>30;this.mt[i]=(this.mt[i]^(1566083941*((4294901760&s)>>>16)<<16)+1566083941*(65535&s))-i,this.mt[i]>>>=0,i++,i>=this.N&&(this.mt[0]=this.mt[this.N-1],i=1)}this.mt[0]=2147483648},Random.prototype.genrand_int32=function(){var y,mag01=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var kk;for(this.mti==this.N+1&&this.init_genrand(5489),kk=0;kk<this.N-this.M;kk++)y=this.mt[kk]&this.UPPER_MASK|this.mt[kk+1]&this.LOWER_MASK,this.mt[kk]=this.mt[kk+this.M]^y>>>1^mag01[1&y];for(;kk<this.N-1;kk++)y=this.mt[kk]&this.UPPER_MASK|this.mt[kk+1]&this.LOWER_MASK,this.mt[kk]=this.mt[kk+(this.M-this.N)]^y>>>1^mag01[1&y];y=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^y>>>1^mag01[1&y],this.mti=0}return y=this.mt[this.mti++],y^=y>>>11,y^=y<<7&2636928640,y^=y<<15&4022730752,y^=y>>>18,y>>>0},Random.prototype.genrand_int31=function(){return this.genrand_int32()>>>1},Random.prototype.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)},Random.prototype.random=function(){return this.pythonCompatibility&&(this.skip&&this.genrand_int32(),this.skip=!0),this.genrand_int32()*(1/4294967296)},Random.prototype.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)},Random.prototype.genrand_res53=function(){var a=this.genrand_int32()>>>5,b=this.genrand_int32()>>>6;return(67108864*a+b)*(1/9007199254740992)},Random.prototype.LOG4=Math.log(4),Random.prototype.SG_MAGICCONST=1+Math.log(4.5),Random.prototype.exponential=function(lambda){if(1!=arguments.length)throw new SyntaxError("exponential() must  be called with 'lambda' parameter");var r=this.random();return-Math.log(r)/lambda},Random.prototype.gamma=function(alpha,beta){if(2!=arguments.length)throw new SyntaxError("gamma() must be called with alpha and beta parameters");if(!(alpha>1)){if(1==alpha){for(var u=this.random();u<=1e-7;)u=this.random();return-Math.log(u)*beta}for(;;){var u=this.random(),b=(Math.E+alpha)/Math.E,p=b*u;if(p<=1)var x=Math.pow(p,1/alpha);else var x=-Math.log((b-p)/alpha);var u1=this.random();if(p>1){if(u1<=Math.pow(x,alpha-1))break}else if(u1<=Math.exp(-x))break}return x*beta}for(var ainv=Math.sqrt(2*alpha-1),bbb=alpha-this.LOG4,ccc=alpha+ainv;;){var u1=this.random();if(!(u1<1e-7||u>.9999999)){var u2=1-this.random(),v=Math.log(u1/(1-u1))/ainv,x=alpha*Math.exp(v),z=u1*u1*u2,r=bbb+ccc*v-x;if(r+this.SG_MAGICCONST-4.5*z>=0||r>=Math.log(z))return x*beta}}},Random.prototype.normal=function(mu,sigma){if(2!=arguments.length)throw new SyntaxError("normal() must be called with mu and sigma parameters");var z=this.lastNormal;if(this.lastNormal=NaN,!z){var a=2*this.random()*Math.PI,b=Math.sqrt(-2*Math.log(1-this.random()));z=Math.cos(a)*b,this.lastNormal=Math.sin(a)*b}return mu+z*sigma},Random.prototype.pareto=function(alpha){if(1!=arguments.length)throw new SyntaxError("pareto() must be called with alpha parameter");var u=this.random();return 1/Math.pow(1-u,1/alpha)},Random.prototype.triangular=function(lower,upper,mode){if(3!=arguments.length)throw new SyntaxError("triangular() must be called with lower, upper and mode parameters");var c=(mode-lower)/(upper-lower),u=this.random();return u<=c?lower+Math.sqrt(u*(upper-lower)*(mode-lower)):upper-Math.sqrt((1-u)*(upper-lower)*(upper-mode))},Random.prototype.uniform=function(lower,upper){if(2!=arguments.length)throw new SyntaxError("uniform() must be called with lower and upper parameters");return lower+this.random()*(upper-lower)},Random.prototype.weibull=function(alpha,beta){if(2!=arguments.length)throw new SyntaxError("weibull() must be called with alpha and beta parameters");var u=1-this.random();return alpha*Math.pow(-Math.log(u),1/beta)},module.exports=Random},function(module,exports,__webpack_require__){"use strict";function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _toArray(arr){return Array.isArray(arr)?arr:Array.from(arr)}var __WEBPACK_IMPORTED_MODULE_0_simjs_random__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_0_simjs_random___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_simjs_random__),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=18)}([function(module,exports,__webpack_require__){function toIterator(data){return data[Symbol.iterator]()}function toArray(iterator){for(var result=[],current=void 0;!(current=iterator.next()).done;)result.push(current.value);return result}exports.b=toIterator,exports.a=toArray},function(module,exports,__webpack_require__){function isSerializedFunctionCall(potentialFunc){return!!potentialFunc&&potentialFunc.______serializedFunctionCall===!0}exports.a=isSerializedFunctionCall},function(module,exports,__webpack_require__){function requestFunctionMessage(functionId){for(var _len=arguments.length,otherFunctionIds=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)otherFunctionIds[_key-1]=arguments[_key];return{functionIds:[functionId].concat(otherFunctionIds),type:WorkerMessageType.FunctionRequest}}function workerResultMessage(result){return{result:result,type:WorkerMessageType.WorkerResult}}function functionExecutionError(error){var errorObject={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=Object.getOwnPropertyNames(error)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var prop=_step.value;errorObject[prop]=JSON.stringify(error[prop])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return{error:errorObject,type:WorkerMessageType.FunctionExecutionError}}function isScheduleTask(message){return message.type===WorkerMessageType.ScheduleTask}function isInitializeMessage(message){return message.type===WorkerMessageType.InitializeWorker}function isFunctionResponse(message){return message.type===WorkerMessageType.FunctionResponse}function isStopMesssage(message){return message.type===WorkerMessageType.Stop}exports.c=requestFunctionMessage,exports.f=workerResultMessage,exports.e=functionExecutionError,exports.b=isScheduleTask,exports.a=isInitializeMessage,exports.d=isFunctionResponse,exports.g=isStopMesssage;var WorkerMessageType;!function(WorkerMessageType){WorkerMessageType[WorkerMessageType.InitializeWorker=0]="InitializeWorker",WorkerMessageType[WorkerMessageType.ScheduleTask=1]="ScheduleTask",WorkerMessageType[WorkerMessageType.FunctionRequest=2]="FunctionRequest",WorkerMessageType[WorkerMessageType.FunctionResponse=3]="FunctionResponse",WorkerMessageType[WorkerMessageType.WorkerResult=4]="WorkerResult",WorkerMessageType[WorkerMessageType.FunctionExecutionError=5]="FunctionExecutionError",WorkerMessageType[WorkerMessageType.Stop=6]="Stop"}(WorkerMessageType||(WorkerMessageType={}))},function(module,exports,__webpack_require__){var __WEBPACK_IMPORTED_MODULE_0__common_worker_worker_messages__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_1__browser_worker_slave_states__=__webpack_require__(6),BrowserWorkerSlave=function(){function BrowserWorkerSlave(functionCache){_classCallCheck(this,BrowserWorkerSlave),this.functionCache=functionCache,this.id=Number.NaN,this.state=new __WEBPACK_IMPORTED_MODULE_1__browser_worker_slave_states__.a(this)}return _createClass(BrowserWorkerSlave,[{key:"changeState",value:function(state){this.state=state,this.state.enter()}},{key:"onMessage",value:function(event){if(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__common_worker_worker_messages__.g)(event.data))close();else if(!this.state.onMessage(event))throw new Error("Message with type "+event.data.type+" cannot be handled by slave "+this)}},{key:"postMessage",value:function(_postMessage){function postMessage(_x){return _postMessage.apply(this,arguments)}return postMessage.toString=function(){return _postMessage.toString()},postMessage}(function(message){postMessage(message)})},{key:"toString",value:function(){return"BrowserSlave { id: "+this.id+", state: '"+this.state.name+"' }"}}]),BrowserWorkerSlave}();exports.a=BrowserWorkerSlave},function(module,exports,__webpack_require__){var __WEBPACK_IMPORTED_MODULE_0__util_simple_map__=__webpack_require__(17),SlaveFunctionLookupTable=function(){function SlaveFunctionLookupTable(){_classCallCheck(this,SlaveFunctionLookupTable),this.cache=new __WEBPACK_IMPORTED_MODULE_0__util_simple_map__.a}return _createClass(SlaveFunctionLookupTable,[{key:"getFunction",value:function(id){return this.cache.get(id.identifier)}},{key:"registerFunction",value:function(definition){var f=this.toFunction(definition);return this.cache.set(definition.id.identifier,f),f}},{key:"registerStaticFunction",value:function(id,func){if(this.has(id))throw new Error("The given function id '"+id.identifier+"' is already used by another function registration, the id needs to be unique.");this.cache.set(id.identifier,func)}},{key:"has",value:function(id){return this.cache.has(id.identifier)}},{key:"toFunction",value:function(definition){if(definition.name){var args=definition.argumentNames.join(", "),wrapper=Function.apply(void 0,["return function "+definition.name+" ("+args+") { "+definition.body+" }; "]);return wrapper()}return Function.apply(void 0,[].concat(_toConsumableArray(definition.argumentNames),[definition.body]))}}]),SlaveFunctionLookupTable}();exports.a=SlaveFunctionLookupTable},function(module,exports,__webpack_require__){function registerStaticParallelFunctions(lookupTable){lookupTable.registerStaticFunction(__WEBPACK_IMPORTED_MODULE_0__parallel_worker_functions__.a.IDENTITY,__WEBPACK_IMPORTED_MODULE_1__util_identity__.a),lookupTable.registerStaticFunction(__WEBPACK_IMPORTED_MODULE_0__parallel_worker_functions__.a.FILTER,__WEBPACK_IMPORTED_MODULE_2__filter_iterator__.a),lookupTable.registerStaticFunction(__WEBPACK_IMPORTED_MODULE_0__parallel_worker_functions__.a.MAP,__WEBPACK_IMPORTED_MODULE_3__map_iterator__.a),lookupTable.registerStaticFunction(__WEBPACK_IMPORTED_MODULE_0__parallel_worker_functions__.a.PARALLEL_JOB_EXECUTOR,__WEBPACK_IMPORTED_MODULE_4__parallel_job_executor__.a),lookupTable.registerStaticFunction(__WEBPACK_IMPORTED_MODULE_0__parallel_worker_functions__.a.RANGE,__WEBPACK_IMPORTED_MODULE_5__range_iterator__.a),lookupTable.registerStaticFunction(__WEBPACK_IMPORTED_MODULE_0__parallel_worker_functions__.a.REDUCE,__WEBPACK_IMPORTED_MODULE_6__reduce_iterator__.a),lookupTable.registerStaticFunction(__WEBPACK_IMPORTED_MODULE_0__parallel_worker_functions__.a.TO_ITERATOR,__WEBPACK_IMPORTED_MODULE_7__util_arrays__.b)}var __WEBPACK_IMPORTED_MODULE_0__parallel_worker_functions__=__webpack_require__(12),__WEBPACK_IMPORTED_MODULE_1__util_identity__=__webpack_require__(16),__WEBPACK_IMPORTED_MODULE_2__filter_iterator__=__webpack_require__(9),__WEBPACK_IMPORTED_MODULE_3__map_iterator__=__webpack_require__(10),__WEBPACK_IMPORTED_MODULE_4__parallel_job_executor__=__webpack_require__(11),__WEBPACK_IMPORTED_MODULE_5__range_iterator__=__webpack_require__(13),__WEBPACK_IMPORTED_MODULE_6__reduce_iterator__=__webpack_require__(14),__WEBPACK_IMPORTED_MODULE_7__util_arrays__=__webpack_require__(0);exports.a=registerStaticParallelFunctions},function(module,exports,__webpack_require__){var __WEBPACK_IMPORTED_MODULE_0__common_function_function_call_deserializer__=__webpack_require__(7),__WEBPACK_IMPORTED_MODULE_1__common_worker_worker_messages__=__webpack_require__(2),BrowserWorkerSlaveState=function(){function BrowserWorkerSlaveState(name,slave){_classCallCheck(this,BrowserWorkerSlaveState),this.name=name,this.slave=slave}return _createClass(BrowserWorkerSlaveState,[{key:"enter",value:function(){}},{key:"onMessage",value:function(event){return!1}}]),BrowserWorkerSlaveState}(),DefaultBrowserWorkerSlaveState=function(_BrowserWorkerSlaveSt){function DefaultBrowserWorkerSlaveState(slave){return _classCallCheck(this,DefaultBrowserWorkerSlaveState),_possibleConstructorReturn(this,(DefaultBrowserWorkerSlaveState.__proto__||Object.getPrototypeOf(DefaultBrowserWorkerSlaveState)).call(this,"Default",slave))}return _inherits(DefaultBrowserWorkerSlaveState,_BrowserWorkerSlaveSt),_createClass(DefaultBrowserWorkerSlaveState,[{key:"onMessage",value:function(event){return!!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__common_worker_worker_messages__.a)(event.data)&&(this.slave.id=event.data.workerId,this.slave.changeState(new IdleBrowserWorkerSlaveState(this.slave)),!0)}}]),DefaultBrowserWorkerSlaveState}(BrowserWorkerSlaveState);exports.a=DefaultBrowserWorkerSlaveState;var IdleBrowserWorkerSlaveState=function(_BrowserWorkerSlaveSt2){function IdleBrowserWorkerSlaveState(slave){return _classCallCheck(this,IdleBrowserWorkerSlaveState),_possibleConstructorReturn(this,(IdleBrowserWorkerSlaveState.__proto__||Object.getPrototypeOf(IdleBrowserWorkerSlaveState)).call(this,"Idle",slave))}return _inherits(IdleBrowserWorkerSlaveState,_BrowserWorkerSlaveSt2),_createClass(IdleBrowserWorkerSlaveState,[{key:"onMessage",value:function(event){var _this3=this;if(!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__common_worker_worker_messages__.b)(event.data))return!1;var task=event.data.task,missingFunctions=task.usedFunctionIds.filter(function(id){return!_this3.slave.functionCache.has(id)});if(0===missingFunctions.length)this.slave.changeState(new ExecuteFunctionBrowserWorkerSlaveState(this.slave,task));else{var _missingFunctions=_toArray(missingFunctions),head=_missingFunctions[0],tail=_missingFunctions.slice(1);this.slave.postMessage(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__common_worker_worker_messages__.c).apply(void 0,[head].concat(_toConsumableArray(tail)))),this.slave.changeState(new WaitingForFunctionDefinitionBrowserWorkerSlaveState(this.slave,task))}return!0}}]),IdleBrowserWorkerSlaveState}(BrowserWorkerSlaveState),WaitingForFunctionDefinitionBrowserWorkerSlaveState=function(_BrowserWorkerSlaveSt3){function WaitingForFunctionDefinitionBrowserWorkerSlaveState(slave,task){_classCallCheck(this,WaitingForFunctionDefinitionBrowserWorkerSlaveState);var _this4=_possibleConstructorReturn(this,(WaitingForFunctionDefinitionBrowserWorkerSlaveState.__proto__||Object.getPrototypeOf(WaitingForFunctionDefinitionBrowserWorkerSlaveState)).call(this,"WaitingForFunctionDefinition",slave));return _this4.task=task,_this4}return _inherits(WaitingForFunctionDefinitionBrowserWorkerSlaveState,_BrowserWorkerSlaveSt3),_createClass(WaitingForFunctionDefinitionBrowserWorkerSlaveState,[{key:"onMessage",value:function(event){var message=event.data;if(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__common_worker_worker_messages__.d)(message)){if(message.missingFunctions.length>0){var identifiers=message.missingFunctions.map(function(functionId){return functionId.identifier}).join(", ");this.slave.postMessage(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__common_worker_worker_messages__.e)(new Error("The function ids ["+identifiers+"] could not be resolved by slave "+this.slave.id+"."))),this.slave.changeState(new IdleBrowserWorkerSlaveState(this.slave))}else{var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=message.functions[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var definition=_step2.value;this.slave.functionCache.registerFunction(definition)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}this.slave.changeState(new ExecuteFunctionBrowserWorkerSlaveState(this.slave,this.task))}return!0}return!1}}]),WaitingForFunctionDefinitionBrowserWorkerSlaveState}(BrowserWorkerSlaveState),ExecuteFunctionBrowserWorkerSlaveState=function(_BrowserWorkerSlaveSt4){function ExecuteFunctionBrowserWorkerSlaveState(slave,task){_classCallCheck(this,ExecuteFunctionBrowserWorkerSlaveState);var _this5=_possibleConstructorReturn(this,(ExecuteFunctionBrowserWorkerSlaveState.__proto__||Object.getPrototypeOf(ExecuteFunctionBrowserWorkerSlaveState)).call(this,"Executing",slave));return _this5.task=task,_this5}return _inherits(ExecuteFunctionBrowserWorkerSlaveState,_BrowserWorkerSlaveSt4),_createClass(ExecuteFunctionBrowserWorkerSlaveState,[{key:"enter",value:function(){var functionDeserializer=new __WEBPACK_IMPORTED_MODULE_0__common_function_function_call_deserializer__.a(this.slave.functionCache);try{var main=functionDeserializer.deserializeFunctionCall(this.task.main),result=main({functionCallDeserializer:functionDeserializer});this.slave.postMessage(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__common_worker_worker_messages__.f)(result))}catch(error){this.slave.postMessage(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__common_worker_worker_messages__.e)(error))}this.slave.changeState(new IdleBrowserWorkerSlaveState(this.slave))}}]),ExecuteFunctionBrowserWorkerSlaveState}(BrowserWorkerSlaveState)},function(module,exports,__webpack_require__){function bind(fn,params){return"function"==typeof fn.bind?fn.bind.apply(fn,[void 0].concat(_toConsumableArray(params))):function(){for(var _len3=arguments.length,additionalParams=Array(_len3),_key3=0;_key3<_len3;_key3++)additionalParams[_key3]=arguments[_key3];return fn.apply(void 0,params.concat(additionalParams))}}var __WEBPACK_IMPORTED_MODULE_0__serialized_function_call__=__webpack_require__(1),FunctionCallDeserializer=function(){function FunctionCallDeserializer(functionLookupTable){_classCallCheck(this,FunctionCallDeserializer),this.functionLookupTable=functionLookupTable}return _createClass(FunctionCallDeserializer,[{key:"deserializeFunctionCall",value:function(functionCall){var _this6=this,deserializeParams=arguments.length>1&&void 0!==arguments[1]&&arguments[1],func=this.functionLookupTable.getFunction(functionCall.functionId);if(!func)throw new Error("The function with the id "+functionCall.functionId.identifier+" could not be retrieved while deserializing the function call. Is the function correctly registered?");var params=functionCall.parameters||[];return deserializeParams&&(params=params.map(function(param){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__serialized_function_call__.a)(param)?_this6.deserializeFunctionCall(param):param})),bind(func,params)}}]),FunctionCallDeserializer}();exports.a=FunctionCallDeserializer},function(module,exports,__webpack_require__){function functionId(namespace,id){return{_______isFunctionId:!0,identifier:namespace+"-"+id}}exports.a=functionId},function(module,exports,__webpack_require__){function filterIterator(iterator,predicate,env){return{next:function(){for(var current=void 0;!(current=iterator.next()).done;)if(predicate(current.value,env))return current;return current}}}exports.a=filterIterator},function(module,exports,__webpack_require__){function mapIterator(iterator,iteratee,env){return{next:function(){var result=iterator.next();return result.done?{done:!0}:{done:result.done,value:iteratee(result.value,env)}}}}exports.a=mapIterator},function(module,exports,__webpack_require__){function createTaskEnvironment(definition,functionCallDeserializer){var taskEnvironment={taskIndex:definition.taskIndex,valuesPerTask:definition.valuesPerTask},_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=definition.environments[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var environment=_step3.value,currentEnvironment=void 0;currentEnvironment=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__function_serialized_function_call__.a)(environment)?functionCallDeserializer.deserializeFunctionCall(environment)(taskEnvironment):environment,taskEnvironment=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__util_assign__.a)(taskEnvironment,currentEnvironment)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return taskEnvironment}function parallelJobExecutor(definition,_ref){var functionCallDeserializer=_ref.functionCallDeserializer,environment=createTaskEnvironment(definition,functionCallDeserializer),generatorFunction=functionCallDeserializer.deserializeFunctionCall(definition.generator,!0),iterator=generatorFunction(environment),_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=definition.operations[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var operation=_step4.value,iteratorFunction=functionCallDeserializer.deserializeFunctionCall(operation.iterator),iteratee=functionCallDeserializer.deserializeFunctionCall(operation.iteratee);iterator=iteratorFunction(iterator,iteratee,environment)}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__util_arrays__.a)(iterator)}var __WEBPACK_IMPORTED_MODULE_0__util_arrays__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_1__function_serialized_function_call__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__util_assign__=__webpack_require__(15);exports.a=parallelJobExecutor},function(module,exports,__webpack_require__){var __WEBPACK_IMPORTED_MODULE_0__function_function_id__=__webpack_require__(8),ParallelWorkerFunctionIds={FILTER:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__function_function_id__.a)("parallel",0),IDENTITY:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__function_function_id__.a)("parallel",1),MAP:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__function_function_id__.a)("parallel",2),PARALLEL_JOB_EXECUTOR:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__function_function_id__.a)("parallel",3),RANGE:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__function_function_id__.a)("parallel",4),REDUCE:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__function_function_id__.a)("parallel",5),TIMES:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__function_function_id__.a)("parallel",6),TO_ITERATOR:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__function_function_id__.a)("parallel",7)};exports.a=ParallelWorkerFunctionIds},function(module,exports,__webpack_require__){function rangeIterator(start,end,step){var distance=end-start,length=Math.max(Math.floor(distance/(step||1)),0),_next=start;return{next:function(){var current=_next;return _next+=step,0!==length--?{done:!1,value:current}:{done:!0}}}}exports.a=rangeIterator},function(module,exports,__webpack_require__){function reduceIterator(defaultValue,iterator,iteratee,env){for(var accumulatedValue=defaultValue,current=void 0;!(current=iterator.next()).done;)accumulatedValue=iteratee(accumulatedValue,current.value,env);return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__util_arrays__.b)([accumulatedValue])}var __WEBPACK_IMPORTED_MODULE_0__util_arrays__=__webpack_require__(0);exports.a=reduceIterator},function(module,exports,__webpack_require__){function assign(target){for(var _len4=arguments.length,sources=Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)sources[_key4-1]=arguments[_key4];if(null==target)throw new TypeError("Cannot convert undefined or null to object");target=Object(target);for(var index=1;index<arguments.length;index++){var source=arguments[index];if(null!=source)for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}exports.a=assign},function(module,exports,__webpack_require__){function identity(element){return element}exports.a=identity},function(module,exports,__webpack_require__){var SimpleMap=function(){function SimpleMap(){_classCallCheck(this,SimpleMap),this.data={}}return _createClass(SimpleMap,[{key:"get",value:function(key){var internalKey=this.toInternalKey(key);return this.has(key)?this.data[internalKey]:void 0}},{key:"has",value:function(key){return this.hasOwnProperty.call(this.data,this.toInternalKey(key))}},{key:"set",value:function(key,value){this.data[this.toInternalKey(key)]=value}},{key:"clear",value:function(){this.data={}}},{key:"toInternalKey",value:function(key){return"@"+key}}]),SimpleMap}();exports.a=SimpleMap},function(module,exports,__webpack_require__){var __WEBPACK_IMPORTED_MODULE_0__browser_worker_slave__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_1__common_function_slave_function_lookup_table__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_2__common_parallel_slave_register_parallel_worker_functions__=__webpack_require__(5),slaveFunctionLookupTable=new __WEBPACK_IMPORTED_MODULE_1__common_function_slave_function_lookup_table__.a;__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__common_parallel_slave_register_parallel_worker_functions__.a)(slaveFunctionLookupTable),function(){function _computeMandelbrotLin(y){function calculateZ(c){for(var z={i:c.i,real:c.real},n=0;n<iterations&&!(Math.pow(z.real,2)+Math.pow(z.i,2)>4);++n){var zI=z.i;z.i=2*z.real*z.i+c.i,z.real=Math.pow(z.real,2)-Math.pow(zI,2)+c.real}return n}for(var line=new Uint8ClampedArray(4*imageWidth),cI=max.i-y*scalingFactor.i,x=0;x<imageWidth;++x){var c={i:cI,real:min.real+x*scalingFactor.real},n=calculateZ(c),base=4*x;line[base]=255&n,line[base+1]=65280&n,line[base+2]=16711680&n,line[base+3]=255}return line}function _entry_computeMandelbrotLin(){try{var _environment=arguments[arguments.length-1];return iterations=_environment.iterations,imageWidth=_environment.imageWidth,max=_environment.max,scalingFactor=_environment.scalingFactor,min=_environment.min,_computeMandelbrotLin.apply(this,arguments)}finally{iterations=void 0,imageWidth=void 0,max=void 0,scalingFactor=void 0,min=void 0}}var iterations=void 0,imageWidth=void 0,max=void 0,scalingFactor=void 0,min=void 0;slaveFunctionLookupTable.registerStaticFunction({identifier:"static:/home/travis/build/MichaReiser/parallel-es-example/src/transpiled/mandelbrot.ts/_entry_computeMandelbrotLin",_______isFunctionId:!0},_entry_computeMandelbrotLin)}(),function(){function _anonymous(memo,count){return memo+count}function knightTours(startPath,_ref){function visitField(field,n){if(n===board.length)return 1;var result=0,fieldIndex=field.x*boardSize+field.y;board[fieldIndex]=n;for(var i=0;i<moves.length;++i){var move=moves[i],successor={x:field.x+move.x,y:field.y+move.y},accessible=successor.x>=0&&successor.y>=0&&successor.x<boardSize&&successor.y<boardSize&&0===board[successor.x*boardSize+successor.y];accessible&&(result+=visitField(successor,n+1))}return board[fieldIndex]=0,result}var boardSize=_ref.boardSize,moves=[{x:-2,y:-1},{x:-2,y:1},{x:-1,y:-2},{x:-1,y:2},{x:1,y:-2},{x:1,y:2},{x:2,y:-1},{x:2,y:1}],board=new Array(boardSize*boardSize);board.fill(0);for(var index=0;index<startPath.length-1;++index){var fieldIndex=startPath[index].x*boardSize+startPath[index].y;board[fieldIndex]=index+1}return visitField(startPath[startPath.length-1],startPath.length)}slaveFunctionLookupTable.registerStaticFunction({identifier:"static:/home/travis/build/MichaReiser/parallel-es-example/src/transpiled/knights-tour.ts/_anonymous",_______isFunctionId:!0},_anonymous),slaveFunctionLookupTable.registerStaticFunction({identifier:"static:/home/travis/build/MichaReiser/parallel-es-example/src/transpiled/knights-tour.ts/knightTours",_______isFunctionId:!0},knightTours)}(),function(){function calculateRequiredAmount(project,environment){for(var amount=project.totalAmount,projectsSameYear=environment.projectsByStartYear[project.startYear],_iterator2=projectsSameYear,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var otherProject=_ref2;if(otherProject===project)break;amount+=otherProject.totalAmount}return amount}function compareNumbersInverse(a,b){return a-b}function createGroups(requiredAmount,noInterestReference,environment){return[{description:"Ziel erreichbar",from:requiredAmount,name:"green",percentage:0,separator:!0},{description:"mit Zusatzliquidit√§t erreichbar",from:requiredAmount-environment.liquidity,name:"yellow",percentage:0,separator:!0,to:requiredAmount},{description:"nicht erreichbar",from:noInterestReference,name:"gray",percentage:0,separator:!1,to:requiredAmount-environment.liquidity},{description:"nicht erreichbar, mit Verlust",name:"red",percentage:0,separator:!1,to:noInterestReference}]}function groupForValue(value,groups){return groups.find(function(group){
return("undefined"==typeof group.from||group.from<=value)&&("undefined"==typeof group.to||group.to>value)})}function computeBucket(bucketStart,bucketSize,simulatedValuesThisYear,groups,valuesByGroup){for(var bucket={max:Number.MIN_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,subBuckets:{green:{group:"green",max:Number.MIN_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,empty:!0},yellow:{group:"yellow",max:Number.MIN_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,empty:!0},gray:{group:"gray",max:Number.MIN_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,empty:!0},red:{group:"red",max:Number.MIN_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,empty:!0}}},bucketEnd=bucketStart+bucketSize,j=bucketStart;j<bucketEnd;++j){var value=simulatedValuesThisYear[j];bucket.min=Math.min(bucket.min,value),bucket.max=Math.max(bucket.max,value);var group=groupForValue(simulatedValuesThisYear[j],groups);++valuesByGroup[group.name];var subBucket=bucket.subBuckets[group.name];subBucket.min=Math.min(subBucket.min,value),subBucket.max=Math.max(subBucket.max,value),subBucket.empty=!1}return bucket}function computeBuckets(groups,simulatedValuesThisYear){for(var NUMBER_OF_BUCKETS=10,valuesByGroup={green:0,yellow:0,gray:0,red:0},bucketSize=Math.round(simulatedValuesThisYear.length/NUMBER_OF_BUCKETS),buckets=[],i=0;i<simulatedValuesThisYear.length;i+=bucketSize){var bucket=computeBucket(i,bucketSize,simulatedValuesThisYear,groups,valuesByGroup);buckets.push(bucket)}return{buckets:buckets,valuesByGroup:valuesByGroup}}function median(values){var half=Math.floor(values.length/2);return values.length%2?values[half]:(values[half-1]+values[half])/2}function calculateProject(project,environment){var requiredAmount=calculateRequiredAmount(project,environment),simulatedValuesThisYear=environment.simulatedValues[project.startYear];simulatedValuesThisYear.sort(compareNumbersInverse);var groups=createGroups(requiredAmount,environment.noInterestReferenceLine[project.startYear],environment),_computeBuckets=computeBuckets(groups,simulatedValuesThisYear),buckets=_computeBuckets.buckets,valuesByGroup=_computeBuckets.valuesByGroup,nonEmptyGroups=groups.filter(function(group){return!!valuesByGroup[group.name]});nonEmptyGroups.forEach(function(group){return group.percentage=valuesByGroup[group.name]/simulatedValuesThisYear.length});var oneSixth=Math.round(simulatedValuesThisYear.length/6);return{buckets:buckets,groups:nonEmptyGroups,max:simulatedValuesThisYear[simulatedValuesThisYear.length-1],median:median(simulatedValuesThisYear),min:simulatedValuesThisYear[0],project:project,twoThird:{max:simulatedValuesThisYear[simulatedValuesThisYear.length-oneSixth],min:simulatedValuesThisYear[oneSixth]}}}function toAbsoluteIndices(indices,cashFlows,investmentAmount){for(var absolute=new Array(indices.length),currentPortfolioValue=investmentAmount,previousYearIndex=100,relativeYear=0;relativeYear<indices.length;++relativeYear){var currentYearIndex=indices[relativeYear],cashFlowStartOfYear=0===relativeYear?0:cashFlows[relativeYear-1],performance=currentYearIndex/previousYearIndex;currentPortfolioValue=(currentPortfolioValue+cashFlowStartOfYear)*performance,absolute[relativeYear]=Math.round(currentPortfolioValue),previousYearIndex=currentYearIndex}return absolute}function simulateSingleAbsoluteOutcome(numYears,cashFlows,options,random){var indices=new Array(numYears+1);indices[0]=100;for(var i=0;i<numYears;++i){var randomPerformance=1+random.normal(options.performance,options.volatility);indices[i+1]=indices[i]*randomPerformance}return toAbsoluteIndices(indices,cashFlows,options.investmentAmount)}function simulateOutcomes(cashFlows,numYears,options){for(var random=new __WEBPACK_IMPORTED_MODULE_0_simjs_random___default.a(10),result=new Array(numYears),year=0;year<=numYears;++year)result[year]=new Array(options.numRuns);for(var run=0;run<options.numRuns;++run)for(var indices=simulateSingleAbsoluteOutcome(numYears,cashFlows,options,random),_year=0;_year<indices.length;++_year)result[_year][run]=indices[_year];return result}function createMonteCarloEnvironment(options,taskEnvironment){function projectsToCashFlows(numYears){for(var cashFlows=[],year=0;year<numYears;++year){var projectsByThisYear=projectsByStartYear[year]||[],cashFlow=-projectsByThisYear.reduce(function(memo,project){return memo+project.totalAmount},0);cashFlows.push(cashFlow)}return cashFlows}function calculateNoInterestReferenceLine(cashFlows,numYears){for(var noInterestReferenceLine=[],investmentAmountLeft=options.investmentAmount,year=0;year<numYears;++year)investmentAmountLeft+=cashFlows[year],noInterestReferenceLine.push(investmentAmountLeft);return noInterestReferenceLine}var projectsToSimulate=options.projects;taskEnvironment&&(projectsToSimulate=options.projects.slice(taskEnvironment.taskIndex*taskEnvironment.valuesPerTask,(taskEnvironment.taskIndex+1)*taskEnvironment.valuesPerTask));for(var projects=options.projects.sort(function(a,b){return a.startYear-b.startYear}),projectsByStartYear={},_iterator=projects,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var project=_ref,arr=projectsByStartYear[project.startYear]=projectsByStartYear[project.startYear]||[];arr.push(project)}var numYears=projectsToSimulate.reduce(function(memo,project){return Math.max(memo,project.startYear)},0),cashFlows=projectsToCashFlows(numYears),noInterestReferenceLine=calculateNoInterestReferenceLine(cashFlows,numYears);return{investmentAmount:options.investmentAmount,liquidity:options.liquidity,noInterestReferenceLine:noInterestReferenceLine,numRuns:options.numRuns,numYears:numYears,projectsByStartYear:projectsByStartYear,simulatedValues:simulateOutcomes(cashFlows,numYears,options)}}slaveFunctionLookupTable.registerStaticFunction({identifier:"static:/home/travis/build/MichaReiser/parallel-es-example/src/transpiled/monte-carlo.ts/calculateProject",_______isFunctionId:!0},calculateProject),slaveFunctionLookupTable.registerStaticFunction({identifier:"static:/home/travis/build/MichaReiser/parallel-es-example/src/transpiled/monte-carlo.ts/createMonteCarloEnvironment",_______isFunctionId:!0},createMonteCarloEnvironment)}();var slave=new __WEBPACK_IMPORTED_MODULE_0__browser_worker_slave__.a(slaveFunctionLookupTable);onmessage=function(){slave.onMessage.apply(slave,arguments)}}])}]);
//# sourceMappingURL=worker-slave.parallel.js.map